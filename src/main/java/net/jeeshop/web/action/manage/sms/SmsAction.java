package net.jeeshop.web.action.manage.sms;import org.tuckey.web.filters.urlrewrite.utils.StringUtils;import net.jeeshop.core.BaseAction;import net.jeeshop.core.ManageContainer;import net.jeeshop.core.sms.SMSWebChinese;import net.jeeshop.services.manage.sms.SmsService;import net.jeeshop.services.manage.sms.bean.Sms;/** * 短信管理 * @author jqsl2012@163.com * */public class SmsAction extends BaseAction<Sms> {	private static final long serialVersionUID = 1L;	private SmsService smsService;	public SmsService getSmsService() {		return smsService;	}	protected void selectListAfter() {		pager.setPagerUrl("sms!selectList.action");	}	public void setSmsService(SmsService smsService) {		this.smsService = smsService;	}	public Sms getE() {		return this.e;	}	public void prepare() throws Exception {		if (this.e == null) {			this.e = new Sms();		}	}	public void insertAfter(Sms e) {		e.clear();	}		/**	 * 重发短信	 * @return	 * @throws Exception	 */	public String updateSendSMS() throws Exception{		if(StringUtils.isBlank(e.getId())){			throw new NullPointerException(ManageContainer.RoleAction_update_error);		}				e = smsService.selectById(e.getId());		if(e==null){			throw new NullPointerException("系统查询不到此短信！");		}				SMSWebChinese.sendSMS(e);				Sms sms = new Sms();		sms.setId(e.getId());		sms.setReturnCode(e.getReturnCode());		smsService.update(e);				return selectList();	}}